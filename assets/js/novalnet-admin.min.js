/**
 * Novalnet Admin action.
 *
 * @category  Novalnet Admin action
 * @package   edd-novalnet-gateway
 * @copyright Novalnet (https://www.novalnet.de)
 * @license   https://www.novalnet.de/payment-plugins/kostenlos/lizenz
 */
var novalnet_admin;function null_basic_params(){jQuery('input[name="edd_settings[novalnet_merchant_id]"], input[name="edd_settings[novalnet_auth_code]"], input[name="edd_settings[novalnet_product_id]"], input[name="edd_settings[novalnet_access_key]"], input[name="edd_settings[novalnet_public_key]"], input[name="edd_settings[novalnet_client_key]"]').val(""),jQuery('select[name="edd_settings[novalnet_tariff_id]"]').find("option").remove(),jQuery('select[name="edd_settings[novalnet_tariff_id]"]').append(jQuery("<option>",{value:"",text:novalnet_admin.select_text})),jQuery('select[name="edd_settings[novalnet_subs_tariff_id]"]').find("option").remove(),jQuery('select[name="edd_settings[novalnet_subs_tariff_id]"]').append(jQuery("<option>",{value:"",text:novalnet_admin.select_text}))}function fill_novalnet_details(){ajax_call({novalnet_api_key:jQuery.trim(jQuery('input[name="edd_settings[novalnet_public_key]"]').val()),action:"get_novalnet_apiconfig"},ajaxurl)}function hide_vendor_details(){jQuery('input[name="edd_settings[novalnet_merchant_id]"], input[name="edd_settings[novalnet_auth_code]"], input[name="edd_settings[novalnet_product_id]"], input[name="edd_settings[novalnet_access_key]"],input[name="edd_settings[novalnet_client_key]"]').prop("readonly",!0),jQuery('input[name="edd_settings[novalnet_merchant_id]"]').closest("tr").css("display","none"),jQuery('input[name="edd_settings[novalnet_auth_code]"]').closest("tr").css("display","none"),jQuery('input[name="edd_settings[novalnet_product_id]"]').closest("tr").css("display","none"),jQuery('input[name="edd_settings[novalnet_access_key]"]').closest("tr").css("display","none"),jQuery('input[name="edd_settings[novalnet_client_key]"]').closest("tr").css("display","none")}function ajax_call(e,n){if("XDomainRequest"in window&&null!==window.XDomainRequest){var t=jQuery.param(e),i=new XDomainRequest;i.open("POST",n),i.onload=function(){config_hash_response(this.responseText)},i.send(t)}else jQuery.ajax({type:"POST",url:n,data:e,success:function(e){config_hash_response(e)}})}function config_hash_response(e){if(jQuery(".blockUI").remove(),void 0!==(e=e.data).error&&""!==e.error)return alert(e.error),null_basic_params(),!1;var n=jQuery('input[name="edd_settings[novalnet_tariff_id]"]').val(),t=jQuery('input[name="edd_settings[novalnet_subs_tariff_id]"]').val();for(var i in"text"==jQuery('input[name="edd_settings[novalnet_tariff_id]"]').prop("type")&&jQuery('input[name="edd_settings[novalnet_tariff_id]"]').replaceWith('<select id="edd_settings[novalnet_tariff_id]" style="width:25em;" name= "edd_settings[novalnet_tariff_id]" ></select>'),"text"==jQuery('input[name="edd_settings[novalnet_subs_tariff_id]"]').prop("type")&&jQuery('input[name="edd_settings[novalnet_subs_tariff_id]"]').replaceWith('<select id="edd_settings[novalnet_subs_tariff_id]" style="width:25em;"  name= "edd_settings[novalnet_subs_tariff_id]" ></select>'),jQuery('select[name="edd_settings[novalnet_tariff_id]"], select[name="edd_settings[novalnet_subs_tariff_id]"]').empty().append(),jQuery('select[name="edd_settings[novalnet_tariff_id]"]').append(jQuery("<option>",{value:"",text:novalnet_admin.select_text})),e.tariff){var s=e.tariff[i].type,a=e.tariff[i].name;"4"===jQuery.trim(s)?(jQuery('select[name="edd_settings[novalnet_subs_tariff_id]"]').append(jQuery("<option>",{value:jQuery.trim(i),text:jQuery.trim(a)})),t===jQuery.trim(i)&&jQuery('select[name="edd_settings[novalnet_subs_tariff_id]"]').val(jQuery.trim(i))):jQuery('select[name="edd_settings[novalnet_tariff_id]"]').append(jQuery("<option>",{value:jQuery.trim(i),text:jQuery.trim(a)})),n===jQuery.trim(i)&&jQuery('select[name="edd_settings[novalnet_tariff_id]"]').val(jQuery.trim(i))}return jQuery('input[name="edd_settings[novalnet_merchant_id]"]').val(e.vendor),jQuery('input[name="edd_settings[novalnet_auth_code]"]').val(e.auth_code),jQuery('input[name="edd_settings[novalnet_product_id]"]').val(e.product),jQuery('input[name="edd_settings[novalnet_access_key]"]').val(e.access_key),jQuery('input[name="edd_settings[novalnet_client_key]"]').val(e.client_key),!0}function onholdConfig(){jQuery('select[id="edd_settings[novalnet_invoice_manual_limit]"],select[id="edd_settings[novalnet_sepa_manual_limit]"],select[id="edd_settings[novalnet_cc_manual_limit]"],select[id="edd_settings[novalnet_paypal_manual_limit]"]').on("change",(function(){"capture"!=jQuery('select[id="edd_settings[novalnet_invoice_manual_limit]"],select[id="edd_settings[novalnet_sepa_manual_limit]"],select[id="edd_settings[novalnet_cc_manual_limit]"],select[id="edd_settings[novalnet_paypal_manual_limit]"]').val()?jQuery('input[id="edd_settings[novalnet_invoice_manual_check]"],input[id="edd_settings[novalnet_sepa_manual_check]"],input[id="edd_settings[novalnet_cc_manual_check]"],input[id="edd_settings[novalnet_paypal_manual_check]"]').closest("tr").show():jQuery('input[id="edd_settings[novalnet_invoice_manual_check]"],input[id="edd_settings[novalnet_sepa_manual_check]"],input[id="edd_settings[novalnet_cc_manual_check]"],input[id="edd_settings[novalnet_paypal_manual_check]"]').closest("tr").hide()})).change()}function guaranteeConfig(){jQuery('input[id="edd_settings[novalnet_invoice_guarantee_enable]"],input[id="edd_settings[novalnet_sepa_guarantee_enable]"]').on("change",(function(){jQuery('input[id="edd_settings[novalnet_invoice_guarantee_enable]"],input[id="edd_settings[novalnet_sepa_guarantee_enable]"]').is(":checked")?(jQuery('select[id="edd_settings[novalnet_invoice_guarantee_pending_status]"],select[id="edd_settings[novalnet_sepa_guarantee_pending_status]"]').closest("tr").show(),jQuery('input[id="edd_settings[novalnet_invoice_guarantee_minimum_order_amount]"],input[id="edd_settings[novalnet_sepa_guarantee_minimum_order_amount]"]').closest("tr").show(),jQuery('select[id="edd_settings[novalnet_sepa_force_normal_payment]"],select[id="edd_settings[novalnet_invoice_force_normal_payment]"]').closest("tr").show(),jQuery('select[id="edd_settings[novalnet_sepa_order_pending_status]"],select[id="edd_settings[novalnet_invoice_order_pending_status]"]').closest("tr").show()):(jQuery('select[id="edd_settings[novalnet_invoice_guarantee_pending_status]"],select[id="edd_settings[novalnet_sepa_guarantee_pending_status]"]').closest("tr").hide(),jQuery('input[id="edd_settings[novalnet_invoice_guarantee_minimum_order_amount]"],input[id="edd_settings[novalnet_sepa_guarantee_minimum_order_amount]"]').closest("tr").hide(),jQuery('select[id="edd_settings[novalnet_sepa_force_normal_payment]"],select[id="edd_settings[novalnet_invoice_force_normal_payment]"]').closest("tr").hide(),jQuery('select[id="edd_settings[novalnet_sepa_order_pending_status]"],select[id="edd_settings[novalnet_invoice_order_pending_status]"]').closest("tr").hide())})).change()}jQuery(document).ready((function(e){""!==e('input[name="edd_settings[novalnet_public_key]"]').val()&&""!==e('input[name="edd_settings[novalnet_tariff_id]"]').val()&&void 0!==e('input[name="edd_settings[novalnet_tariff_id]"]').val()||e(".notice-success").hide(),e(".guarantee_requirements").css("width","550%"),hide_vendor_details(),jQuery('input[name="edd_settings[novalnet_public_key]"]').on("change",(function(){""!==jQuery.trim(jQuery('input[name="edd_settings[novalnet_public_key]"]').val())?fill_novalnet_details():null_basic_params()})),null!=e('input[name="edd_settings[novalnet_public_key]"]').val()&&""!=e('input[name="edd_settings[novalnet_public_key]"]').val()?(fill_novalnet_details(),hide_vendor_details()):null_basic_params(),onholdConfig(),guaranteeConfig(),"0"==jQuery('select[id="edd_settings[novalnet_subs_enable_option]"]').val()?jQuery(".novalnet_subs_config").closest("tr").hide():(jQuery(".novalnet_subs_config").closest("tr").show(),jQuery("#edd_settings_novalnet_subs_payments__chosen").css("width","400px")),jQuery('select[id="edd_settings[novalnet_subs_enable_option]"]').on("change",(function(){"0"==jQuery('select[id="edd_settings[novalnet_subs_enable_option]"]').val()?jQuery(".novalnet_subs_config").closest("tr").hide():(jQuery(".novalnet_subs_config").closest("tr").show(),jQuery("#edd_settings_novalnet_subs_payments__chosen").css("width","400px"))})),jQuery('input[name="edd_settings[novalnet_sepa_due_date]"]').on("change",(function(){let e=jQuery(this).val().trim();/^\d+$/.test(e)||jQuery(this).val("")}))}));